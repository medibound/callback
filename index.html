<!DOCTYPE html>
<html>
<head>
    <title>Authentication complete</title>
</head>
<body>
    <p>Authentication is complete. If this does not happen automatically, please close the window.</p>
    <script>
        window.addEventListener('load', function() {
            // Get the authorization code from the URL
            const urlParams = new URLSearchParams(window.location.search);
            const code = urlParams.get('code');
            const state = urlParams.get('state');
            
            // Store in localStorage with a unique key based on state
            if (code && state) {
                localStorage.setItem(`flutter-web-auth-2-${state}`, JSON.stringify({
                    code: code,
                    state: state
                }));
            }
            
            // Close the window
            window.close();
        });
    </script>
</body>
</html>
